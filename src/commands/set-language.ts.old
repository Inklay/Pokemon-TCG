import { ButtonInteraction, ChatInputCommandInteraction, SlashCommandBuilder } from 'discord.js'
import { Command } from '../class/Command'
import { Lang } from '../class/Lang'
import { Server } from '../class/Server'
import { ServerType } from '../class/ServerType'
import { Language } from '../class/Language'

export class slahCommand implements Command {
	data: SlashCommandBuilder

	constructor() {
		this.data = new SlashCommandBuilder()
			.setName('set-language')
			.setDescription('Changes the language of the bot for this server')

		this.data.addStringOption(option => option
			.setName('language')
			.setDescription('The new language for this server')
			.setRequired(true)
			.addChoices(
				{ 'name': 'English', 'value': 'en' },
				{ 'name': 'Fran√ßais', 'value': 'fr' }
			)
		)
	}

	async execute(interaction: ChatInputCommandInteraction, lang: Lang, user: User) {
		Server.setLanguage(id, type, interaction.options.get('language')?.value as Language)
		// const reply = set(lang, interaction.member as GuildMember, interaction.options.getString('language') as string, interaction.inGuild() ? interaction.guildId : interaction.user.id, interaction.inGuild() ? 'guild' : 'user')
		// await interaction.reply({
		// 	embeds: [reply.embed],
		// 	components: reply.hasButton() ? reply.buttons : undefined,
		// 	ephemeral: true
		// })
		await interaction.reply('test')
	}

  async handleButtons(_: ButtonInteraction, __: Lang) {
		return
	}
}
